{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/** @internal */\nexport function addClipPlaneUniforms(uniforms) {\n  if (uniforms.indexOf(\"vClipPlane\") === -1) {\n    uniforms.push(\"vClipPlane\");\n  }\n  if (uniforms.indexOf(\"vClipPlane2\") === -1) {\n    uniforms.push(\"vClipPlane2\");\n  }\n  if (uniforms.indexOf(\"vClipPlane3\") === -1) {\n    uniforms.push(\"vClipPlane3\");\n  }\n  if (uniforms.indexOf(\"vClipPlane4\") === -1) {\n    uniforms.push(\"vClipPlane4\");\n  }\n  if (uniforms.indexOf(\"vClipPlane5\") === -1) {\n    uniforms.push(\"vClipPlane5\");\n  }\n  if (uniforms.indexOf(\"vClipPlane6\") === -1) {\n    uniforms.push(\"vClipPlane6\");\n  }\n}\n/** @internal */\nexport function prepareStringDefinesForClipPlanes(primaryHolder, secondaryHolder, defines) {\n  var _a, _b, _c, _d, _e, _f;\n  const clipPlane = !!((_a = primaryHolder.clipPlane) !== null && _a !== void 0 ? _a : secondaryHolder.clipPlane);\n  const clipPlane2 = !!((_b = primaryHolder.clipPlane2) !== null && _b !== void 0 ? _b : secondaryHolder.clipPlane2);\n  const clipPlane3 = !!((_c = primaryHolder.clipPlane3) !== null && _c !== void 0 ? _c : secondaryHolder.clipPlane3);\n  const clipPlane4 = !!((_d = primaryHolder.clipPlane4) !== null && _d !== void 0 ? _d : secondaryHolder.clipPlane4);\n  const clipPlane5 = !!((_e = primaryHolder.clipPlane5) !== null && _e !== void 0 ? _e : secondaryHolder.clipPlane5);\n  const clipPlane6 = !!((_f = primaryHolder.clipPlane6) !== null && _f !== void 0 ? _f : secondaryHolder.clipPlane6);\n  if (clipPlane) defines.push(\"#define CLIPPLANE\");\n  if (clipPlane2) defines.push(\"#define CLIPPLANE2\");\n  if (clipPlane3) defines.push(\"#define CLIPPLANE3\");\n  if (clipPlane4) defines.push(\"#define CLIPPLANE4\");\n  if (clipPlane5) defines.push(\"#define CLIPPLANE5\");\n  if (clipPlane6) defines.push(\"#define CLIPPLANE6\");\n}\n/** @internal */\nexport function prepareDefinesForClipPlanes(primaryHolder, secondaryHolder, defines) {\n  var _a, _b, _c, _d, _e, _f;\n  let changed = false;\n  const clipPlane = !!((_a = primaryHolder.clipPlane) !== null && _a !== void 0 ? _a : secondaryHolder.clipPlane);\n  const clipPlane2 = !!((_b = primaryHolder.clipPlane2) !== null && _b !== void 0 ? _b : secondaryHolder.clipPlane2);\n  const clipPlane3 = !!((_c = primaryHolder.clipPlane3) !== null && _c !== void 0 ? _c : secondaryHolder.clipPlane3);\n  const clipPlane4 = !!((_d = primaryHolder.clipPlane4) !== null && _d !== void 0 ? _d : secondaryHolder.clipPlane4);\n  const clipPlane5 = !!((_e = primaryHolder.clipPlane5) !== null && _e !== void 0 ? _e : secondaryHolder.clipPlane5);\n  const clipPlane6 = !!((_f = primaryHolder.clipPlane6) !== null && _f !== void 0 ? _f : secondaryHolder.clipPlane6);\n  // Do not factorize this code, it breaks browsers optimizations.\n  if (defines[\"CLIPPLANE\"] !== clipPlane) {\n    defines[\"CLIPPLANE\"] = clipPlane;\n    changed = true;\n  }\n  if (defines[\"CLIPPLANE2\"] !== clipPlane2) {\n    defines[\"CLIPPLANE2\"] = clipPlane2;\n    changed = true;\n  }\n  if (defines[\"CLIPPLANE3\"] !== clipPlane3) {\n    defines[\"CLIPPLANE3\"] = clipPlane3;\n    changed = true;\n  }\n  if (defines[\"CLIPPLANE4\"] !== clipPlane4) {\n    defines[\"CLIPPLANE4\"] = clipPlane4;\n    changed = true;\n  }\n  if (defines[\"CLIPPLANE5\"] !== clipPlane5) {\n    defines[\"CLIPPLANE5\"] = clipPlane5;\n    changed = true;\n  }\n  if (defines[\"CLIPPLANE6\"] !== clipPlane6) {\n    defines[\"CLIPPLANE6\"] = clipPlane6;\n    changed = true;\n  }\n  return changed;\n}\n/** @internal */\nexport function bindClipPlane(effect, primaryHolder, secondaryHolder) {\n  var _a, _b, _c, _d, _e, _f;\n  let clipPlane = (_a = primaryHolder.clipPlane) !== null && _a !== void 0 ? _a : secondaryHolder.clipPlane;\n  setClipPlane(effect, \"vClipPlane\", clipPlane);\n  clipPlane = (_b = primaryHolder.clipPlane2) !== null && _b !== void 0 ? _b : secondaryHolder.clipPlane2;\n  setClipPlane(effect, \"vClipPlane2\", clipPlane);\n  clipPlane = (_c = primaryHolder.clipPlane3) !== null && _c !== void 0 ? _c : secondaryHolder.clipPlane3;\n  setClipPlane(effect, \"vClipPlane3\", clipPlane);\n  clipPlane = (_d = primaryHolder.clipPlane4) !== null && _d !== void 0 ? _d : secondaryHolder.clipPlane4;\n  setClipPlane(effect, \"vClipPlane4\", clipPlane);\n  clipPlane = (_e = primaryHolder.clipPlane5) !== null && _e !== void 0 ? _e : secondaryHolder.clipPlane5;\n  setClipPlane(effect, \"vClipPlane5\", clipPlane);\n  clipPlane = (_f = primaryHolder.clipPlane6) !== null && _f !== void 0 ? _f : secondaryHolder.clipPlane6;\n  setClipPlane(effect, \"vClipPlane6\", clipPlane);\n}\nfunction setClipPlane(effect, uniformName, clipPlane) {\n  if (clipPlane) {\n    effect.setFloat4(uniformName, clipPlane.normal.x, clipPlane.normal.y, clipPlane.normal.z, clipPlane.d);\n  }\n}","map":{"version":3,"names":["addClipPlaneUniforms","uniforms","indexOf","push","prepareStringDefinesForClipPlanes","primaryHolder","secondaryHolder","defines","clipPlane","_a","clipPlane2","_b","clipPlane3","_c","clipPlane4","_d","clipPlane5","_e","clipPlane6","_f","prepareDefinesForClipPlanes","changed","bindClipPlane","effect","setClipPlane","uniformName","setFloat4","normal","x","y","z","d"],"sources":["../../../../dev/core/src/Materials/clipPlaneMaterialHelper.ts"],"sourcesContent":["import type { Effect } from \"./effect\";\r\nimport type { IClipPlanesHolder } from \"../Misc/interfaces/iClipPlanesHolder\";\r\nimport type { Nullable } from \"../types\";\r\nimport type { Plane } from \"../Maths/math.plane\";\r\n\r\n/** @internal */\r\nexport function addClipPlaneUniforms(uniforms: string[]): void {\r\n    if (uniforms.indexOf(\"vClipPlane\") === -1) {\r\n        uniforms.push(\"vClipPlane\");\r\n    }\r\n    if (uniforms.indexOf(\"vClipPlane2\") === -1) {\r\n        uniforms.push(\"vClipPlane2\");\r\n    }\r\n    if (uniforms.indexOf(\"vClipPlane3\") === -1) {\r\n        uniforms.push(\"vClipPlane3\");\r\n    }\r\n    if (uniforms.indexOf(\"vClipPlane4\") === -1) {\r\n        uniforms.push(\"vClipPlane4\");\r\n    }\r\n    if (uniforms.indexOf(\"vClipPlane5\") === -1) {\r\n        uniforms.push(\"vClipPlane5\");\r\n    }\r\n    if (uniforms.indexOf(\"vClipPlane6\") === -1) {\r\n        uniforms.push(\"vClipPlane6\");\r\n    }\r\n}\r\n\r\n/** @internal */\r\nexport function prepareStringDefinesForClipPlanes(primaryHolder: IClipPlanesHolder, secondaryHolder: IClipPlanesHolder, defines: string[]): void {\r\n    const clipPlane = !!(primaryHolder.clipPlane ?? secondaryHolder.clipPlane);\r\n    const clipPlane2 = !!(primaryHolder.clipPlane2 ?? secondaryHolder.clipPlane2);\r\n    const clipPlane3 = !!(primaryHolder.clipPlane3 ?? secondaryHolder.clipPlane3);\r\n    const clipPlane4 = !!(primaryHolder.clipPlane4 ?? secondaryHolder.clipPlane4);\r\n    const clipPlane5 = !!(primaryHolder.clipPlane5 ?? secondaryHolder.clipPlane5);\r\n    const clipPlane6 = !!(primaryHolder.clipPlane6 ?? secondaryHolder.clipPlane6);\r\n\r\n    if (clipPlane) defines.push(\"#define CLIPPLANE\");\r\n    if (clipPlane2) defines.push(\"#define CLIPPLANE2\");\r\n    if (clipPlane3) defines.push(\"#define CLIPPLANE3\");\r\n    if (clipPlane4) defines.push(\"#define CLIPPLANE4\");\r\n    if (clipPlane5) defines.push(\"#define CLIPPLANE5\");\r\n    if (clipPlane6) defines.push(\"#define CLIPPLANE6\");\r\n}\r\n\r\n/** @internal */\r\nexport function prepareDefinesForClipPlanes(primaryHolder: IClipPlanesHolder, secondaryHolder: IClipPlanesHolder, defines: Record<string, any>): boolean {\r\n    let changed = false;\r\n\r\n    const clipPlane = !!(primaryHolder.clipPlane ?? secondaryHolder.clipPlane);\r\n    const clipPlane2 = !!(primaryHolder.clipPlane2 ?? secondaryHolder.clipPlane2);\r\n    const clipPlane3 = !!(primaryHolder.clipPlane3 ?? secondaryHolder.clipPlane3);\r\n    const clipPlane4 = !!(primaryHolder.clipPlane4 ?? secondaryHolder.clipPlane4);\r\n    const clipPlane5 = !!(primaryHolder.clipPlane5 ?? secondaryHolder.clipPlane5);\r\n    const clipPlane6 = !!(primaryHolder.clipPlane6 ?? secondaryHolder.clipPlane6);\r\n\r\n    // Do not factorize this code, it breaks browsers optimizations.\r\n    if (defines[\"CLIPPLANE\"] !== clipPlane) {\r\n        defines[\"CLIPPLANE\"] = clipPlane;\r\n        changed = true;\r\n    }\r\n    if (defines[\"CLIPPLANE2\"] !== clipPlane2) {\r\n        defines[\"CLIPPLANE2\"] = clipPlane2;\r\n        changed = true;\r\n    }\r\n    if (defines[\"CLIPPLANE3\"] !== clipPlane3) {\r\n        defines[\"CLIPPLANE3\"] = clipPlane3;\r\n        changed = true;\r\n    }\r\n    if (defines[\"CLIPPLANE4\"] !== clipPlane4) {\r\n        defines[\"CLIPPLANE4\"] = clipPlane4;\r\n        changed = true;\r\n    }\r\n    if (defines[\"CLIPPLANE5\"] !== clipPlane5) {\r\n        defines[\"CLIPPLANE5\"] = clipPlane5;\r\n        changed = true;\r\n    }\r\n    if (defines[\"CLIPPLANE6\"] !== clipPlane6) {\r\n        defines[\"CLIPPLANE6\"] = clipPlane6;\r\n        changed = true;\r\n    }\r\n\r\n    return changed;\r\n}\r\n\r\n/** @internal */\r\nexport function bindClipPlane(effect: Effect, primaryHolder: IClipPlanesHolder, secondaryHolder: IClipPlanesHolder): void {\r\n    let clipPlane = primaryHolder.clipPlane ?? secondaryHolder.clipPlane;\r\n    setClipPlane(effect, \"vClipPlane\", clipPlane);\r\n    clipPlane = primaryHolder.clipPlane2 ?? secondaryHolder.clipPlane2;\r\n    setClipPlane(effect, \"vClipPlane2\", clipPlane);\r\n    clipPlane = primaryHolder.clipPlane3 ?? secondaryHolder.clipPlane3;\r\n    setClipPlane(effect, \"vClipPlane3\", clipPlane);\r\n    clipPlane = primaryHolder.clipPlane4 ?? secondaryHolder.clipPlane4;\r\n    setClipPlane(effect, \"vClipPlane4\", clipPlane);\r\n    clipPlane = primaryHolder.clipPlane5 ?? secondaryHolder.clipPlane5;\r\n    setClipPlane(effect, \"vClipPlane5\", clipPlane);\r\n    clipPlane = primaryHolder.clipPlane6 ?? secondaryHolder.clipPlane6;\r\n    setClipPlane(effect, \"vClipPlane6\", clipPlane);\r\n}\r\n\r\nfunction setClipPlane(effect: Effect, uniformName: string, clipPlane: Nullable<Plane>): void {\r\n    if (clipPlane) {\r\n        effect.setFloat4(uniformName, clipPlane.normal.x, clipPlane.normal.y, clipPlane.normal.z, clipPlane.d);\r\n    }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}