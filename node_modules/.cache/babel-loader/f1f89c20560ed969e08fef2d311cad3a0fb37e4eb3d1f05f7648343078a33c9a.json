{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { EffectWrapper } from \"../../Materials/effectRenderer.js\";\nimport { Observable } from \"../../Misc/observable.js\";\n/**\n * Defines the base object used for fluid rendering.\n * It is based on a list of vertices (particles)\n */\nexport class FluidRenderingObject {\n  /** Gets or sets the size of the particle */\n  get particleSize() {\n    return this._particleSize;\n  }\n  set particleSize(size) {\n    if (size === this._particleSize) {\n      return;\n    }\n    this._particleSize = size;\n    this.onParticleSizeChanged.notifyObservers(this);\n  }\n  /** Indicates if the object uses instancing or not */\n  get useInstancing() {\n    return !this.indexBuffer;\n  }\n  /** Indicates if velocity of particles should be used when rendering the object. The vertex buffer set must contain a \"velocity\" buffer for this to work! */\n  get useVelocity() {\n    return this._useVelocity;\n  }\n  set useVelocity(use) {\n    if (this._useVelocity === use || !this._hasVelocity()) {\n      return;\n    }\n    this._useVelocity = use;\n    this._effectsAreDirty = true;\n  }\n  _hasVelocity() {\n    var _a;\n    return !!((_a = this.vertexBuffers) === null || _a === void 0 ? void 0 : _a.velocity);\n  }\n  /**\n   * Gets the index buffer (or null if the object is using instancing)\n   */\n  get indexBuffer() {\n    return null;\n  }\n  /**\n   * Gets the name of the class\n   */\n  getClassName() {\n    return \"FluidRenderingObject\";\n  }\n  /**\n   * Instantiates a fluid rendering object\n   * @param scene The scene the object is part of\n   */\n  constructor(scene) {\n    /** Defines the priority of the object. Objects will be rendered in ascending order of priority */\n    this.priority = 0;\n    this._particleSize = 0.1;\n    /** Observable triggered when the size of the particle is changed */\n    this.onParticleSizeChanged = new Observable();\n    /** Defines the alpha value of a particle */\n    this.particleThicknessAlpha = 0.05;\n    this._useVelocity = false;\n    this._scene = scene;\n    this._engine = scene.getEngine();\n    this._effectsAreDirty = true;\n    this._depthEffectWrapper = null;\n    this._thicknessEffectWrapper = null;\n  }\n  _createEffects() {\n    const uniformNames = [\"view\", \"projection\", \"particleRadius\", \"size\"];\n    const attributeNames = [\"position\", \"offset\"];\n    const defines = [];\n    this._effectsAreDirty = false;\n    if (this.useVelocity) {\n      attributeNames.push(\"velocity\");\n      defines.push(\"#define FLUIDRENDERING_VELOCITY\");\n    }\n    if (this._scene.useRightHandedSystem) {\n      defines.push(\"#define FLUIDRENDERING_RHS\");\n    }\n    this._depthEffectWrapper = new EffectWrapper({\n      engine: this._engine,\n      useShaderStore: true,\n      vertexShader: \"fluidRenderingParticleDepth\",\n      fragmentShader: \"fluidRenderingParticleDepth\",\n      attributeNames,\n      uniformNames,\n      samplerNames: [],\n      defines\n    });\n    uniformNames.push(\"particleAlpha\");\n    this._thicknessEffectWrapper = new EffectWrapper({\n      engine: this._engine,\n      useShaderStore: true,\n      vertexShader: \"fluidRenderingParticleThickness\",\n      fragmentShader: \"fluidRenderingParticleThickness\",\n      attributeNames: [\"position\", \"offset\"],\n      uniformNames,\n      samplerNames: []\n    });\n  }\n  /**\n   * Indicates if the object is ready to be rendered\n   * @returns True if everything is ready for the object to be rendered, otherwise false\n   */\n  isReady() {\n    if (this._effectsAreDirty) {\n      this._createEffects();\n    }\n    if (!this._depthEffectWrapper || !this._thicknessEffectWrapper) {\n      return false;\n    }\n    const depthEffect = this._depthEffectWrapper._drawWrapper.effect;\n    const thicknessEffect = this._thicknessEffectWrapper._drawWrapper.effect;\n    return depthEffect.isReady() && thicknessEffect.isReady();\n  }\n  /**\n   * Render the depth texture for this object\n   */\n  renderDepthTexture() {\n    const numParticles = this.numParticles;\n    if (!this._depthEffectWrapper || numParticles === 0) {\n      return;\n    }\n    const depthDrawWrapper = this._depthEffectWrapper._drawWrapper;\n    const depthEffect = depthDrawWrapper.effect;\n    this._engine.enableEffect(depthDrawWrapper);\n    this._engine.bindBuffers(this.vertexBuffers, this.indexBuffer, depthEffect);\n    depthEffect.setMatrix(\"view\", this._scene.getViewMatrix());\n    depthEffect.setMatrix(\"projection\", this._scene.getProjectionMatrix());\n    depthEffect.setFloat2(\"size\", this._particleSize, this._particleSize);\n    depthEffect.setFloat(\"particleRadius\", this._particleSize / 2);\n    if (this.useInstancing) {\n      this._engine.drawArraysType(7, 0, 4, numParticles);\n    } else {\n      this._engine.drawElementsType(0, 0, numParticles);\n    }\n  }\n  /**\n   * Render the thickness texture for this object\n   */\n  renderThicknessTexture() {\n    const numParticles = this.numParticles;\n    if (!this._thicknessEffectWrapper || numParticles === 0) {\n      return;\n    }\n    const thicknessDrawWrapper = this._thicknessEffectWrapper._drawWrapper;\n    const thicknessEffect = thicknessDrawWrapper.effect;\n    this._engine.setAlphaMode(6);\n    this._engine.setDepthWrite(false);\n    this._engine.enableEffect(thicknessDrawWrapper);\n    this._engine.bindBuffers(this.vertexBuffers, this.indexBuffer, thicknessEffect);\n    thicknessEffect.setMatrix(\"view\", this._scene.getViewMatrix());\n    thicknessEffect.setMatrix(\"projection\", this._scene.getProjectionMatrix());\n    thicknessEffect.setFloat(\"particleAlpha\", this.particleThicknessAlpha);\n    thicknessEffect.setFloat2(\"size\", this._particleSize, this._particleSize);\n    if (this.useInstancing) {\n      this._engine.drawArraysType(7, 0, 4, numParticles);\n    } else {\n      this._engine.drawElementsType(0, 0, numParticles);\n    }\n    this._engine.setDepthWrite(true);\n    this._engine.setAlphaMode(0);\n  }\n  /**\n   * Render the diffuse texture for this object\n   */\n  renderDiffuseTexture() {\n    // do nothing by default\n  }\n  /**\n   * Releases the ressources used by the class\n   */\n  dispose() {\n    var _a, _b;\n    (_a = this._depthEffectWrapper) === null || _a === void 0 ? void 0 : _a.dispose();\n    (_b = this._thicknessEffectWrapper) === null || _b === void 0 ? void 0 : _b.dispose();\n  }\n}","map":{"version":3,"names":["EffectWrapper","Observable","FluidRenderingObject","particleSize","_particleSize","size","onParticleSizeChanged","notifyObservers","useInstancing","indexBuffer","useVelocity","_useVelocity","use","_hasVelocity","_effectsAreDirty","_a","vertexBuffers","velocity","getClassName","constructor","scene","priority","particleThicknessAlpha","_scene","_engine","getEngine","_depthEffectWrapper","_thicknessEffectWrapper","_createEffects","uniformNames","attributeNames","defines","push","useRightHandedSystem","engine","useShaderStore","vertexShader","fragmentShader","samplerNames","isReady","depthEffect","_drawWrapper","effect","thicknessEffect","renderDepthTexture","numParticles","depthDrawWrapper","enableEffect","bindBuffers","setMatrix","getViewMatrix","getProjectionMatrix","setFloat2","setFloat","drawArraysType","drawElementsType","renderThicknessTexture","thicknessDrawWrapper","setAlphaMode","setDepthWrite","renderDiffuseTexture","dispose","_b"],"sources":["../../../../../dev/core/src/Rendering/fluidRenderer/fluidRenderingObject.ts"],"sourcesContent":["import type { VertexBuffer } from \"core/Buffers/buffer\";\r\nimport type { DataBuffer } from \"core/Buffers/dataBuffer\";\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport type { Engine } from \"core/Engines/engine\";\r\nimport { EffectWrapper } from \"core/Materials/effectRenderer\";\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport type { Scene } from \"core/scene\";\r\nimport type { Nullable } from \"core/types\";\r\n\r\n/**\r\n * Defines the base object used for fluid rendering.\r\n * It is based on a list of vertices (particles)\r\n */\r\nexport abstract class FluidRenderingObject {\r\n    protected _scene: Scene;\r\n    protected _engine: Engine;\r\n    protected _effectsAreDirty: boolean;\r\n    protected _depthEffectWrapper: Nullable<EffectWrapper>;\r\n    protected _thicknessEffectWrapper: Nullable<EffectWrapper>;\r\n\r\n    /** Defines the priority of the object. Objects will be rendered in ascending order of priority */\r\n    public priority = 0;\r\n\r\n    protected _particleSize = 0.1;\r\n\r\n    /** Observable triggered when the size of the particle is changed */\r\n    public onParticleSizeChanged = new Observable<FluidRenderingObject>();\r\n\r\n    /** Gets or sets the size of the particle */\r\n    public get particleSize() {\r\n        return this._particleSize;\r\n    }\r\n\r\n    public set particleSize(size: number) {\r\n        if (size === this._particleSize) {\r\n            return;\r\n        }\r\n\r\n        this._particleSize = size;\r\n        this.onParticleSizeChanged.notifyObservers(this);\r\n    }\r\n\r\n    /** Defines the alpha value of a particle */\r\n    public particleThicknessAlpha = 0.05;\r\n\r\n    /** Indicates if the object uses instancing or not */\r\n    public get useInstancing() {\r\n        return !this.indexBuffer;\r\n    }\r\n\r\n    private _useVelocity = false;\r\n\r\n    /** Indicates if velocity of particles should be used when rendering the object. The vertex buffer set must contain a \"velocity\" buffer for this to work! */\r\n    public get useVelocity() {\r\n        return this._useVelocity;\r\n    }\r\n\r\n    public set useVelocity(use: boolean) {\r\n        if (this._useVelocity === use || !this._hasVelocity()) {\r\n            return;\r\n        }\r\n\r\n        this._useVelocity = use;\r\n        this._effectsAreDirty = true;\r\n    }\r\n\r\n    private _hasVelocity() {\r\n        return !!this.vertexBuffers?.velocity;\r\n    }\r\n\r\n    /**\r\n     * Gets the vertex buffers\r\n     */\r\n    public abstract get vertexBuffers(): { [key: string]: VertexBuffer };\r\n\r\n    /**\r\n     * Gets the index buffer (or null if the object is using instancing)\r\n     */\r\n    public get indexBuffer(): Nullable<DataBuffer> {\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Gets the name of the class\r\n     */\r\n    public getClassName(): string {\r\n        return \"FluidRenderingObject\";\r\n    }\r\n\r\n    /**\r\n     * Instantiates a fluid rendering object\r\n     * @param scene The scene the object is part of\r\n     */\r\n    constructor(scene: Scene) {\r\n        this._scene = scene;\r\n        this._engine = scene.getEngine();\r\n        this._effectsAreDirty = true;\r\n        this._depthEffectWrapper = null;\r\n        this._thicknessEffectWrapper = null;\r\n    }\r\n\r\n    protected _createEffects(): void {\r\n        const uniformNames = [\"view\", \"projection\", \"particleRadius\", \"size\"];\r\n        const attributeNames = [\"position\", \"offset\"];\r\n        const defines: string[] = [];\r\n\r\n        this._effectsAreDirty = false;\r\n\r\n        if (this.useVelocity) {\r\n            attributeNames.push(\"velocity\");\r\n            defines.push(\"#define FLUIDRENDERING_VELOCITY\");\r\n        }\r\n\r\n        if (this._scene.useRightHandedSystem) {\r\n            defines.push(\"#define FLUIDRENDERING_RHS\");\r\n        }\r\n\r\n        this._depthEffectWrapper = new EffectWrapper({\r\n            engine: this._engine,\r\n            useShaderStore: true,\r\n            vertexShader: \"fluidRenderingParticleDepth\",\r\n            fragmentShader: \"fluidRenderingParticleDepth\",\r\n            attributeNames,\r\n            uniformNames,\r\n            samplerNames: [],\r\n            defines,\r\n        });\r\n\r\n        uniformNames.push(\"particleAlpha\");\r\n\r\n        this._thicknessEffectWrapper = new EffectWrapper({\r\n            engine: this._engine,\r\n            useShaderStore: true,\r\n            vertexShader: \"fluidRenderingParticleThickness\",\r\n            fragmentShader: \"fluidRenderingParticleThickness\",\r\n            attributeNames: [\"position\", \"offset\"],\r\n            uniformNames,\r\n            samplerNames: [],\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Indicates if the object is ready to be rendered\r\n     * @returns True if everything is ready for the object to be rendered, otherwise false\r\n     */\r\n    public isReady(): boolean {\r\n        if (this._effectsAreDirty) {\r\n            this._createEffects();\r\n        }\r\n\r\n        if (!this._depthEffectWrapper || !this._thicknessEffectWrapper) {\r\n            return false;\r\n        }\r\n\r\n        const depthEffect = this._depthEffectWrapper._drawWrapper.effect!;\r\n        const thicknessEffect = this._thicknessEffectWrapper._drawWrapper.effect!;\r\n\r\n        return depthEffect.isReady() && thicknessEffect.isReady();\r\n    }\r\n\r\n    /**\r\n     * Gets the number of particles (vertices) of this object\r\n     * @returns The number of particles\r\n     */\r\n    public abstract get numParticles(): number;\r\n\r\n    /**\r\n     * Render the depth texture for this object\r\n     */\r\n    public renderDepthTexture(): void {\r\n        const numParticles = this.numParticles;\r\n\r\n        if (!this._depthEffectWrapper || numParticles === 0) {\r\n            return;\r\n        }\r\n\r\n        const depthDrawWrapper = this._depthEffectWrapper._drawWrapper;\r\n        const depthEffect = depthDrawWrapper.effect!;\r\n\r\n        this._engine.enableEffect(depthDrawWrapper);\r\n        this._engine.bindBuffers(this.vertexBuffers, this.indexBuffer, depthEffect);\r\n\r\n        depthEffect.setMatrix(\"view\", this._scene.getViewMatrix());\r\n        depthEffect.setMatrix(\"projection\", this._scene.getProjectionMatrix());\r\n        depthEffect.setFloat2(\"size\", this._particleSize, this._particleSize);\r\n        depthEffect.setFloat(\"particleRadius\", this._particleSize / 2);\r\n\r\n        if (this.useInstancing) {\r\n            this._engine.drawArraysType(Constants.MATERIAL_TriangleStripDrawMode, 0, 4, numParticles);\r\n        } else {\r\n            this._engine.drawElementsType(Constants.MATERIAL_TriangleFillMode, 0, numParticles);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Render the thickness texture for this object\r\n     */\r\n    public renderThicknessTexture(): void {\r\n        const numParticles = this.numParticles;\r\n\r\n        if (!this._thicknessEffectWrapper || numParticles === 0) {\r\n            return;\r\n        }\r\n\r\n        const thicknessDrawWrapper = this._thicknessEffectWrapper._drawWrapper;\r\n        const thicknessEffect = thicknessDrawWrapper.effect!;\r\n\r\n        this._engine.setAlphaMode(Constants.ALPHA_ONEONE);\r\n        this._engine.setDepthWrite(false);\r\n\r\n        this._engine.enableEffect(thicknessDrawWrapper);\r\n        this._engine.bindBuffers(this.vertexBuffers, this.indexBuffer, thicknessEffect);\r\n\r\n        thicknessEffect.setMatrix(\"view\", this._scene.getViewMatrix());\r\n        thicknessEffect.setMatrix(\"projection\", this._scene.getProjectionMatrix());\r\n        thicknessEffect.setFloat(\"particleAlpha\", this.particleThicknessAlpha);\r\n        thicknessEffect.setFloat2(\"size\", this._particleSize, this._particleSize);\r\n\r\n        if (this.useInstancing) {\r\n            this._engine.drawArraysType(Constants.MATERIAL_TriangleStripDrawMode, 0, 4, numParticles);\r\n        } else {\r\n            this._engine.drawElementsType(Constants.MATERIAL_TriangleFillMode, 0, numParticles);\r\n        }\r\n\r\n        this._engine.setDepthWrite(true);\r\n        this._engine.setAlphaMode(Constants.ALPHA_DISABLE);\r\n    }\r\n\r\n    /**\r\n     * Render the diffuse texture for this object\r\n     */\r\n    public renderDiffuseTexture(): void {\r\n        // do nothing by default\r\n    }\r\n\r\n    /**\r\n     * Releases the ressources used by the class\r\n     */\r\n    public dispose(): void {\r\n        this._depthEffectWrapper?.dispose();\r\n        this._thicknessEffectWrapper?.dispose();\r\n    }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}