{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { NodeMaterialBlock } from \"../nodeMaterialBlock.js\";\nimport { NodeMaterialBlockConnectionPointTypes } from \"../Enums/nodeMaterialBlockConnectionPointTypes.js\";\nimport { NodeMaterialBlockTargets } from \"../Enums/nodeMaterialBlockTargets.js\";\nimport { RegisterClass } from \"../../../Misc/typeStore.js\";\n/**\n * Block used to replace a color by another one\n */\nexport class ReplaceColorBlock extends NodeMaterialBlock {\n  /**\n   * Creates a new ReplaceColorBlock\n   * @param name defines the block name\n   */\n  constructor(name) {\n    super(name, NodeMaterialBlockTargets.Neutral);\n    this.registerInput(\"value\", NodeMaterialBlockConnectionPointTypes.AutoDetect);\n    this.registerInput(\"reference\", NodeMaterialBlockConnectionPointTypes.AutoDetect);\n    this.registerInput(\"distance\", NodeMaterialBlockConnectionPointTypes.Float);\n    this.registerInput(\"replacement\", NodeMaterialBlockConnectionPointTypes.AutoDetect);\n    this.registerOutput(\"output\", NodeMaterialBlockConnectionPointTypes.BasedOnInput);\n    this._outputs[0]._typeConnectionSource = this._inputs[0];\n    this._linkConnectionTypes(0, 1);\n    this._linkConnectionTypes(0, 3);\n    this._inputs[0].excludedConnectionPointTypes.push(NodeMaterialBlockConnectionPointTypes.Float);\n    this._inputs[0].excludedConnectionPointTypes.push(NodeMaterialBlockConnectionPointTypes.Matrix);\n    this._inputs[1].excludedConnectionPointTypes.push(NodeMaterialBlockConnectionPointTypes.Float);\n    this._inputs[1].excludedConnectionPointTypes.push(NodeMaterialBlockConnectionPointTypes.Matrix);\n    this._inputs[3].excludedConnectionPointTypes.push(NodeMaterialBlockConnectionPointTypes.Float);\n    this._inputs[3].excludedConnectionPointTypes.push(NodeMaterialBlockConnectionPointTypes.Matrix);\n  }\n  /**\n   * Gets the current class name\n   * @returns the class name\n   */\n  getClassName() {\n    return \"ReplaceColorBlock\";\n  }\n  /**\n   * Gets the value input component\n   */\n  get value() {\n    return this._inputs[0];\n  }\n  /**\n   * Gets the reference input component\n   */\n  get reference() {\n    return this._inputs[1];\n  }\n  /**\n   * Gets the distance input component\n   */\n  get distance() {\n    return this._inputs[2];\n  }\n  /**\n   * Gets the replacement input component\n   */\n  get replacement() {\n    return this._inputs[3];\n  }\n  /**\n   * Gets the output component\n   */\n  get output() {\n    return this._outputs[0];\n  }\n  _buildBlock(state) {\n    super._buildBlock(state);\n    const output = this._outputs[0];\n    state.compilationString += this._declareOutput(output, state) + `;\\n`;\n    state.compilationString += `if (length(${this.value.associatedVariableName} - ${this.reference.associatedVariableName}) < ${this.distance.associatedVariableName}) {\\n`;\n    state.compilationString += `${output.associatedVariableName} = ${this.replacement.associatedVariableName};\\n`;\n    state.compilationString += `} else {\\n`;\n    state.compilationString += `${output.associatedVariableName} = ${this.value.associatedVariableName};\\n`;\n    state.compilationString += `}\\n`;\n    return this;\n  }\n}\nRegisterClass(\"BABYLON.ReplaceColorBlock\", ReplaceColorBlock);","map":{"version":3,"names":["NodeMaterialBlock","NodeMaterialBlockConnectionPointTypes","NodeMaterialBlockTargets","RegisterClass","ReplaceColorBlock","constructor","name","Neutral","registerInput","AutoDetect","Float","registerOutput","BasedOnInput","_outputs","_typeConnectionSource","_inputs","_linkConnectionTypes","excludedConnectionPointTypes","push","Matrix","getClassName","value","reference","distance","replacement","output","_buildBlock","state","compilationString","_declareOutput","associatedVariableName"],"sources":["../../../../../../dev/core/src/Materials/Node/Blocks/replaceColorBlock.ts"],"sourcesContent":["import { NodeMaterialBlock } from \"../nodeMaterialBlock\";\r\nimport { NodeMaterialBlockConnectionPointTypes } from \"../Enums/nodeMaterialBlockConnectionPointTypes\";\r\nimport type { NodeMaterialBuildState } from \"../nodeMaterialBuildState\";\r\nimport type { NodeMaterialConnectionPoint } from \"../nodeMaterialBlockConnectionPoint\";\r\nimport { NodeMaterialBlockTargets } from \"../Enums/nodeMaterialBlockTargets\";\r\nimport { RegisterClass } from \"../../../Misc/typeStore\";\r\n/**\r\n * Block used to replace a color by another one\r\n */\r\nexport class ReplaceColorBlock extends NodeMaterialBlock {\r\n    /**\r\n     * Creates a new ReplaceColorBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name, NodeMaterialBlockTargets.Neutral);\r\n\r\n        this.registerInput(\"value\", NodeMaterialBlockConnectionPointTypes.AutoDetect);\r\n        this.registerInput(\"reference\", NodeMaterialBlockConnectionPointTypes.AutoDetect);\r\n        this.registerInput(\"distance\", NodeMaterialBlockConnectionPointTypes.Float);\r\n        this.registerInput(\"replacement\", NodeMaterialBlockConnectionPointTypes.AutoDetect);\r\n        this.registerOutput(\"output\", NodeMaterialBlockConnectionPointTypes.BasedOnInput);\r\n\r\n        this._outputs[0]._typeConnectionSource = this._inputs[0];\r\n        this._linkConnectionTypes(0, 1);\r\n        this._linkConnectionTypes(0, 3);\r\n\r\n        this._inputs[0].excludedConnectionPointTypes.push(NodeMaterialBlockConnectionPointTypes.Float);\r\n        this._inputs[0].excludedConnectionPointTypes.push(NodeMaterialBlockConnectionPointTypes.Matrix);\r\n        this._inputs[1].excludedConnectionPointTypes.push(NodeMaterialBlockConnectionPointTypes.Float);\r\n        this._inputs[1].excludedConnectionPointTypes.push(NodeMaterialBlockConnectionPointTypes.Matrix);\r\n        this._inputs[3].excludedConnectionPointTypes.push(NodeMaterialBlockConnectionPointTypes.Float);\r\n        this._inputs[3].excludedConnectionPointTypes.push(NodeMaterialBlockConnectionPointTypes.Matrix);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public getClassName() {\r\n        return \"ReplaceColorBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the value input component\r\n     */\r\n    public get value(): NodeMaterialConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the reference input component\r\n     */\r\n    public get reference(): NodeMaterialConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the distance input component\r\n     */\r\n    public get distance(): NodeMaterialConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the replacement input component\r\n     */\r\n    public get replacement(): NodeMaterialConnectionPoint {\r\n        return this._inputs[3];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeMaterialConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    protected _buildBlock(state: NodeMaterialBuildState) {\r\n        super._buildBlock(state);\r\n\r\n        const output = this._outputs[0];\r\n\r\n        state.compilationString += this._declareOutput(output, state) + `;\\n`;\r\n        state.compilationString += `if (length(${this.value.associatedVariableName} - ${this.reference.associatedVariableName}) < ${this.distance.associatedVariableName}) {\\n`;\r\n        state.compilationString += `${output.associatedVariableName} = ${this.replacement.associatedVariableName};\\n`;\r\n        state.compilationString += `} else {\\n`;\r\n        state.compilationString += `${output.associatedVariableName} = ${this.value.associatedVariableName};\\n`;\r\n        state.compilationString += `}\\n`;\r\n        return this;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.ReplaceColorBlock\", ReplaceColorBlock);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}