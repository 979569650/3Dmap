{"ast":null,"code":"import { NodeGeometryBlock } from \"../../nodeGeometryBlock.js\";\nimport { RegisterClass } from \"../../../../Misc/typeStore.js\";\nimport { NodeGeometryBlockConnectionPointTypes } from \"../../Enums/nodeGeometryConnectionPointTypes.js\";\nimport { GeometryInputBlock } from \"../geometryInputBlock.js\";\nimport { Matrix, Vector3 } from \"../../../../Maths/math.vector.js\";\n/**\n * Block used to get a scaling matrix\n */\nexport class ScalingBlock extends NodeGeometryBlock {\n  /**\n   * Create a new ScalingBlock\n   * @param name defines the block name\n   */\n  constructor(name) {\n    super(name);\n    this.registerInput(\"scale\", NodeGeometryBlockConnectionPointTypes.Vector3, false, Vector3.One());\n    this.registerOutput(\"matrix\", NodeGeometryBlockConnectionPointTypes.Matrix);\n  }\n  /**\n   * Gets the current class name\n   * @returns the class name\n   */\n  getClassName() {\n    return \"ScalingBlock\";\n  }\n  /**\n   * Gets the scale input component\n   */\n  get scale() {\n    return this._inputs[0];\n  }\n  /**\n   * Gets the matrix output component\n   */\n  get matrix() {\n    return this._outputs[0];\n  }\n  autoConfigure() {\n    if (!this.scale.isConnected) {\n      const scaleInput = new GeometryInputBlock(\"Scale\");\n      scaleInput.value = new Vector3(1, 1, 1);\n      scaleInput.output.connectTo(this.scale);\n    }\n  }\n  _buildBlock(state) {\n    super._buildBlock(state);\n    this.matrix._storedFunction = state => {\n      const value = this.scale.getConnectedValue(state);\n      return Matrix.Scaling(value.x, value.y, value.z);\n    };\n  }\n}\nRegisterClass(\"BABYLON.ScalingBlock\", ScalingBlock);","map":{"version":3,"names":["NodeGeometryBlock","RegisterClass","NodeGeometryBlockConnectionPointTypes","GeometryInputBlock","Matrix","Vector3","ScalingBlock","constructor","name","registerInput","One","registerOutput","getClassName","scale","_inputs","matrix","_outputs","autoConfigure","isConnected","scaleInput","value","output","connectTo","_buildBlock","state","_storedFunction","getConnectedValue","Scaling","x","y","z"],"sources":["../../../../../../../dev/core/src/Meshes/Node/Blocks/Matrices/scalingBlock.ts"],"sourcesContent":["import { NodeGeometryBlock } from \"../../nodeGeometryBlock\";\r\nimport type { NodeGeometryConnectionPoint } from \"../../nodeGeometryBlockConnectionPoint\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeGeometryBlockConnectionPointTypes } from \"../../Enums/nodeGeometryConnectionPointTypes\";\r\nimport type { NodeGeometryBuildState } from \"../../nodeGeometryBuildState\";\r\nimport { GeometryInputBlock } from \"../geometryInputBlock\";\r\nimport { Matrix, Vector3 } from \"../../../../Maths/math.vector\";\r\n\r\n/**\r\n * Block used to get a scaling matrix\r\n */\r\nexport class ScalingBlock extends NodeGeometryBlock {\r\n    /**\r\n     * Create a new ScalingBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"scale\", NodeGeometryBlockConnectionPointTypes.Vector3, false, Vector3.One());\r\n        this.registerOutput(\"matrix\", NodeGeometryBlockConnectionPointTypes.Matrix);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public getClassName() {\r\n        return \"ScalingBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the scale input component\r\n     */\r\n    public get scale(): NodeGeometryConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the matrix output component\r\n     */\r\n    public get matrix(): NodeGeometryConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    public autoConfigure() {\r\n        if (!this.scale.isConnected) {\r\n            const scaleInput = new GeometryInputBlock(\"Scale\");\r\n            scaleInput.value = new Vector3(1, 1, 1);\r\n            scaleInput.output.connectTo(this.scale);\r\n        }\r\n    }\r\n\r\n    protected _buildBlock(state: NodeGeometryBuildState) {\r\n        super._buildBlock(state);\r\n\r\n        this.matrix._storedFunction = (state) => {\r\n            const value = this.scale.getConnectedValue(state) as Vector3;\r\n            return Matrix.Scaling(value.x, value.y, value.z);\r\n        };\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.ScalingBlock\", ScalingBlock);\r\n"],"mappings":"AAAA,SAASA,iBAAiB,QAAQ,4BAA0B;AAE5D,SAASC,aAAa,QAAQ,+BAA6B;AAC3D,SAASC,qCAAqC,QAAQ,iDAA+C;AAErG,SAASC,kBAAkB,QAAQ,0BAAwB;AAC3D,SAASC,MAAM,EAAEC,OAAO,QAAQ,kCAAgC;AAEhE;;;AAGA,OAAM,MAAOC,YAAa,SAAQN,iBAAiB;EAC/C;;;;EAIAO,YAAmBC,IAAY;IAC3B,KAAK,CAACA,IAAI,CAAC;IAEX,IAAI,CAACC,aAAa,CAAC,OAAO,EAAEP,qCAAqC,CAACG,OAAO,EAAE,KAAK,EAAEA,OAAO,CAACK,GAAG,EAAE,CAAC;IAChG,IAAI,CAACC,cAAc,CAAC,QAAQ,EAAET,qCAAqC,CAACE,MAAM,CAAC;EAC/E;EAEA;;;;EAIOQ,YAAYA,CAAA;IACf,OAAO,cAAc;EACzB;EAEA;;;EAGA,IAAWC,KAAKA,CAAA;IACZ,OAAO,IAAI,CAACC,OAAO,CAAC,CAAC,CAAC;EAC1B;EAEA;;;EAGA,IAAWC,MAAMA,CAAA;IACb,OAAO,IAAI,CAACC,QAAQ,CAAC,CAAC,CAAC;EAC3B;EAEOC,aAAaA,CAAA;IAChB,IAAI,CAAC,IAAI,CAACJ,KAAK,CAACK,WAAW,EAAE;MACzB,MAAMC,UAAU,GAAG,IAAIhB,kBAAkB,CAAC,OAAO,CAAC;MAClDgB,UAAU,CAACC,KAAK,GAAG,IAAIf,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;MACvCc,UAAU,CAACE,MAAM,CAACC,SAAS,CAAC,IAAI,CAACT,KAAK,CAAC;;EAE/C;EAEUU,WAAWA,CAACC,KAA6B;IAC/C,KAAK,CAACD,WAAW,CAACC,KAAK,CAAC;IAExB,IAAI,CAACT,MAAM,CAACU,eAAe,GAAID,KAAK,IAAI;MACpC,MAAMJ,KAAK,GAAG,IAAI,CAACP,KAAK,CAACa,iBAAiB,CAACF,KAAK,CAAY;MAC5D,OAAOpB,MAAM,CAACuB,OAAO,CAACP,KAAK,CAACQ,CAAC,EAAER,KAAK,CAACS,CAAC,EAAET,KAAK,CAACU,CAAC,CAAC;IACpD,CAAC;EACL;;AAGJ7B,aAAa,CAAC,sBAAsB,EAAEK,YAAY,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}