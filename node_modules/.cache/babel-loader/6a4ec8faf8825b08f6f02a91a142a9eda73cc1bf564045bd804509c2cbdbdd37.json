{"ast":null,"code":"import { FlowGraphEventBlock } from \"../../flowGraphEventBlock.js\";\nimport { RegisterClass } from \"../../../Misc/typeStore.js\";\n/**\n * @experimental\n * Block that triggers on scene tick (before each render).\n */\nexport class FlowGraphSceneTickEventBlock extends FlowGraphEventBlock {\n  /**\n   * @internal\n   */\n  _preparePendingTasks(context) {\n    if (!context._getExecutionVariable(this, \"sceneBeforeRender\")) {\n      const scene = context.configuration.scene;\n      const contextObserver = scene.onBeforeRenderObservable.add(() => {\n        this._execute(context);\n      });\n      context._setExecutionVariable(this, \"sceneBeforeRender\", contextObserver);\n    }\n  }\n  /**\n   * @internal\n   */\n  _cancelPendingTasks(context) {\n    const contextObserver = context._getExecutionVariable(this, \"sceneBeforeRender\");\n    const scene = context.configuration.scene;\n    scene.onBeforeRenderObservable.remove(contextObserver);\n    context._deleteExecutionVariable(this, \"sceneBeforeRender\");\n  }\n  getClassName() {\n    return \"FGSceneTickEventBlock\";\n  }\n}\nRegisterClass(\"FGSceneTickEventBlock\", FlowGraphSceneTickEventBlock);","map":{"version":3,"names":["FlowGraphEventBlock","RegisterClass","FlowGraphSceneTickEventBlock","_preparePendingTasks","context","_getExecutionVariable","scene","configuration","contextObserver","onBeforeRenderObservable","add","_execute","_setExecutionVariable","_cancelPendingTasks","remove","_deleteExecutionVariable","getClassName"],"sources":["../../../../../../dev/core/src/FlowGraph/Blocks/Event/flowGraphSceneTickEventBlock.ts"],"sourcesContent":["import { FlowGraphEventBlock } from \"../../flowGraphEventBlock\";\r\nimport type { FlowGraphContext } from \"core/FlowGraph/flowGraphContext\";\r\nimport { RegisterClass } from \"../../../Misc/typeStore\";\r\n/**\r\n * @experimental\r\n * Block that triggers on scene tick (before each render).\r\n */\r\nexport class FlowGraphSceneTickEventBlock extends FlowGraphEventBlock {\r\n    /**\r\n     * @internal\r\n     */\r\n    public _preparePendingTasks(context: FlowGraphContext): void {\r\n        if (!context._getExecutionVariable(this, \"sceneBeforeRender\")) {\r\n            const scene = context.configuration.scene;\r\n            const contextObserver = scene.onBeforeRenderObservable.add(() => {\r\n                this._execute(context);\r\n            });\r\n            context._setExecutionVariable(this, \"sceneBeforeRender\", contextObserver);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _cancelPendingTasks(context: FlowGraphContext) {\r\n        const contextObserver = context._getExecutionVariable(this, \"sceneBeforeRender\");\r\n        const scene = context.configuration.scene;\r\n        scene.onBeforeRenderObservable.remove(contextObserver);\r\n        context._deleteExecutionVariable(this, \"sceneBeforeRender\");\r\n    }\r\n\r\n    public getClassName(): string {\r\n        return \"FGSceneTickEventBlock\";\r\n    }\r\n}\r\nRegisterClass(\"FGSceneTickEventBlock\", FlowGraphSceneTickEventBlock);\r\n"],"mappings":"AAAA,SAASA,mBAAmB,QAAQ,8BAA4B;AAEhE,SAASC,aAAa,QAAQ,4BAA0B;AACxD;;;;AAIA,OAAM,MAAOC,4BAA6B,SAAQF,mBAAmB;EACjE;;;EAGOG,oBAAoBA,CAACC,OAAyB;IACjD,IAAI,CAACA,OAAO,CAACC,qBAAqB,CAAC,IAAI,EAAE,mBAAmB,CAAC,EAAE;MAC3D,MAAMC,KAAK,GAAGF,OAAO,CAACG,aAAa,CAACD,KAAK;MACzC,MAAME,eAAe,GAAGF,KAAK,CAACG,wBAAwB,CAACC,GAAG,CAAC,MAAK;QAC5D,IAAI,CAACC,QAAQ,CAACP,OAAO,CAAC;MAC1B,CAAC,CAAC;MACFA,OAAO,CAACQ,qBAAqB,CAAC,IAAI,EAAE,mBAAmB,EAAEJ,eAAe,CAAC;;EAEjF;EAEA;;;EAGOK,mBAAmBA,CAACT,OAAyB;IAChD,MAAMI,eAAe,GAAGJ,OAAO,CAACC,qBAAqB,CAAC,IAAI,EAAE,mBAAmB,CAAC;IAChF,MAAMC,KAAK,GAAGF,OAAO,CAACG,aAAa,CAACD,KAAK;IACzCA,KAAK,CAACG,wBAAwB,CAACK,MAAM,CAACN,eAAe,CAAC;IACtDJ,OAAO,CAACW,wBAAwB,CAAC,IAAI,EAAE,mBAAmB,CAAC;EAC/D;EAEOC,YAAYA,CAAA;IACf,OAAO,uBAAuB;EAClC;;AAEJf,aAAa,CAAC,uBAAuB,EAAEC,4BAA4B,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}